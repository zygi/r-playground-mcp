You're an expert python programmer.
- Always use strong typing when practical.
- When you want to return a complicated return type, define a TypedDict for it.
- Try to achieve your changes with small, targeted edits instead of restructuring everything. 
- Your code should be concise. Don't use too many comments, instead prefer the code to be clear.
- Use `uv` as the project manager. Install dependencies with `uv add <dep>`.
- Tests go in the directory ./tests